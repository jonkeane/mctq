<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The social jetlag computation • mctq</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The social jetlag computation">
<meta property="og:description" content="mctq">
<meta property="og:image" content="https://gipsousp.github.io/mctq/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-CQHJT6E3K1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CQHJT6E3K1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mctq</a>
        <span class="version label label-warning" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mctq.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/gipsousp/mctq/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="sjl_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The social jetlag computation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gipsousp/mctq/blob/master/vignettes/sjl.Rmd"><code>vignettes/sjl.Rmd</code></a></small>
      <div class="hidden name"><code>sjl.Rmd</code></div>

    </div>

    
    
<p><strong>UNDER DEVELOPMENT</strong></p>
<p>Shows the rationale behind the social jetlag concept and computation, and how its signal must be interpreted.</p>
<p>12h limit on the shortest interval. Unsolvable condition due to the problem of the two intervals.</p>
<p>As you can see in the Guidelines section, the original MCTQ author (Till Roenneberg) proposes a method for estimating the social jetlag that is based on the difference between <span class="math inline">\(MSF\)</span> and <span class="math inline">\(MSW\)</span> (here we call this method by the term <strong><code>"difference"</code></strong>). Although that simple mathematical equation can work for most cases, it can also produce errors related to the circular nature of time.</p>
<p>Example 1: A scenario where the <code>"difference"</code> method works well</p>
<p><span class="math inline">\(MSW = \text{04:00}\)</span></p>
<p><span class="math inline">\(MSF = \text{06:00}\)</span></p>
<p><span class="math inline">\(MSF - MSW = \text{02:00}\)</span></p>
<p><span class="math inline">\(\text{Real difference: 02:00}\)</span></p>
<p>Example 2: A scenario where the <code>"difference"</code> method don’t work</p>
<p><span class="math inline">\(MSW = \text{23:00}\)</span></p>
<p><span class="math inline">\(MSF = \text{03:00}\)</span></p>
<p><span class="math inline">\(MSF - MSW = \text{-20:00}\)</span></p>
<p><span class="math inline">\(\text{Real difference: 04:00}\)</span></p>
<p>As you can see in example 2, the “difference” method uses a linear approach creating possible problems regarding the circularity of time.</p>
<p>But the problem don’t stop there. Even if we use a circular approach, we fall into a dilemma. That’s because there’s always two possible intervals between two hour values, considering a two day timeline. As illustrated below.</p>
<pre><code>             day 1                        day 2
     MSF               MSW       MSF                MSW
   05:00              21:00     05:00              21:00
-----|------------------|---------|------------------|-----&gt;
              16h           8h             16h
          longer int.   shorter int.    longer int.
</code></pre>
<p>For most cases, the real difference between <span class="math inline">\(MSF\)</span> and <span class="math inline">\(MSW\)</span> falls into the shortest interval between the two.</p>
<p>When <code>abs == FALSE</code>, <code><a href="../reference/sjl.html">sjl()</a></code> will set the output signal considering <span class="math inline">\(MSW\)</span> position in relation to <span class="math inline">\(MSF\)</span> in the shortest possible interval between the two. That is to say that the <span class="math inline">\(SJL\)</span> signal will be positive when <span class="math inline">\(MSW\)</span> comes before or are equal to <span class="math inline">\(MSF\)</span>, and negative when <span class="math inline">\(MSW\)</span> comes after <span class="math inline">\(MSF\)</span>, in that shortest interval window.</p>
<p>The rationale showed above about the <span class="math inline">\(SJL\)</span> signal is the same one used on Roenneberg, T., Pilz, L. K., Zerbini, G., &amp; Winnebeck, E. C. (2019).</p>
<p>Example: A scenario where <span class="math inline">\(SJL\)</span> will be positive</p>
<pre><code>             day 1                        day 2
     MSF               MSW       MSF                MSW
   07:00              23:00     07:00              23:00
-----|------------------|---------|------------------|-----&gt;
              16h           8h             16h
          longer int.   shorter int.    longer int.</code></pre>
<p>Example: A scenario where <span class="math inline">\(SJL\)</span> will be negative</p>
<pre><code>             day 1                        day 2
    MSW                MSF       MSW                MSF
   07:00              23:00     07:00              23:00
-----|------------------|---------|------------------|-----&gt;
              16h           8h             16h
          longer int.   shorter int.    longer int.</code></pre>
<p>That’s the best way we found to establish a reliable <span class="math inline">\(SJL\)</span> signal, considering the context of MCTQ data, but it comes with a limitation (see Function limitation section). If you find this hard to understand (and it is), see <code>vignette("social-jet-lag", package = "mctq")</code> for more details.</p>
<p>This function uses the shortest interval between <span class="math inline">\(MSW\)</span> and <span class="math inline">\(MSF\)</span> to find the social jet lag (<span class="math inline">\(SJL\)</span>) value. That means that, if <span class="math inline">\(MSF\)</span> and <span class="math inline">\(MSW\)</span> values distance themselves by more than 12h, this function can return a wrong output (function limitation).</p>
<p>The situation described above is highly improbable to happen when dealing with MCTQ data and is irresolvable by only looking at the data. That’s because there’s always two possible intervals between two hour values, considering a two day timeline.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/danielvartan">Daniel Vartanian</a>, Ana Amelia Benedito-Silva, Mario Pedrazzoli, <a href="http://each.usp.br/gipso">Interdisciplinary Sleep Research Group (GIPSO)</a>, <a href="http://usp.br">University of Sao Paulo (USP)</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
